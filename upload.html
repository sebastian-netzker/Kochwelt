<html>

<head>
    <title> Kochwelt </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@100;300;400;500;600;700;800;900&amp;display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
        form {
            display: flex;
            flex-direction: column;
        }

        .uploaddiv {
            margin-top: 130px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        fieldset {
            display: flex;
            flex-direction: column;
        }
    </style>
    <script>

        function createEntry(parentNodeId,prototypeId) {

            // Clone node

            parentNode = document.getElementById(parentNodeId);
            childNode = document.getElementById(prototypeId).cloneNode('deep');

            // Clean values and id (only first level of children is cleaned)
            
            childNode.removeAttribute('id');
            childNode.value = '';

            if (childNode.children.length > 0) {
                for (let i = 0; i < childNode.children.length; i++) {
                    childNode.children[i].value = '';
                }
            }

            // Insert

            lastChild = parentNode.children[parentNode.children.length - 1]
            parentNode.insertBefore(childNode, lastChild);

        }

        function form2nestedObject(form) {

            let object = {};
            let ingredients = {};
            let preparation = {};

            for (let i = 0; i < form.length; i++) {

                // Handle ingredients

                if (form[i].id.indexOf('ingredient') > -1) {
                    ingredients[form[i].id] = form[i].value;
                }

                // Handle preparation

                else if (form[i].id.indexOf('preparation') > -1 && form[i].id !== 'preparation_time') {
                    preparation[form[i].id] = form[i].value;
                }

                // Handle the rest

                else {
                    object[form[i].id] = form[i].value;
                }

            }

            object.ingredients = ingredients;
            object.preparation = preparation;

            return object;

        }

    </script>
</head>

<body>
    <div class="navigation-bar">

        <img class="logo" src="img/logo.png">

        <nav class="navigation-menu">

            <a href="index.html"> Start </a>&nbsp; | &nbsp;
            <a href="recepy.html"> Rezept des Tages</a>&nbsp; | &nbsp;
            <a href="upload.html"> Upload </a>&nbsp; | &nbsp;
            <a href="contact.html"> Kontakt </a>&nbsp; | &nbsp;
            <a href="imprint.html"> Impressum </a>&nbsp; | &nbsp;
        </nav>
    </div>
    <div class="uploaddiv">
        <h1>Rezept einreichen</h1>
        <form action="" id="recepyform">
            <input type="text" name="recepy" placeholder="Rezeptname">
            <label for="image">F端ge ein Bild hinzu</label>
            <input type="file" name="image">
            <fieldset id="ingredients">
                <label for="ingredients">Zutaten</label>
                <fieldset id="ingredientsPrototype">
                    <input type="text" name="ingredient" placeholder="Zutat">
                    <input type="text" name="portion" placeholder="Menge">
                    <select name="unit">
                        <option></option>
                        <option>g</option>
                        <option>l</option>
                        <option>ml</option>
                        <option>TL</option>
                        <option>EL</option>
                        <option>St端ck</option>
                        <option>Prise</option>
                    </select>
                </fieldset>
                <input type="button" value="Zutat hinzuf端gen" onclick="createEntry('ingredients','ingredientsPrototype')">
            </fieldset>




            <label for="difficulty">Schwierigkeit</label>
            <select name="difficulty">
                <option>Leicht</option>
                <option>Mittel</option>
                <option>Schwer</option>
            </select>

            <input type="text" name="preparation_time" placeholder="Zubereitungszeit in Minuten">

            <input type="text" name="calories" placeholder="Kalorien">

            <input type="text" name="category" placeholder="Kategorie">

            <input type="text" name="price" placeholder="Preis">

            <fieldset id="preparations">
                <label for="preparation">Zubereitung</label>
                <input type="text" name="preparation" placeholder="Zubereitungsschritt" id="preparationPrototype">
                <input type="button" value="Schritt hinzuf端gen" onclick="createEntry('preparation','preparationPrototype')">
            </fieldset>


            <input type="text" name="creator" placeholder="Ersteller*in">

            <input type="submit">
        </form>
    </div>
</body>

</html>